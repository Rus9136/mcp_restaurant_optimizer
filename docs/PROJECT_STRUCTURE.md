# 📁 Структура проекта MCP Restaurant Optimizer

```
mcp_restaurant_optimizer/
├── 📄 README.md                    # Краткое описание и быстрый старт
├── 📄 .env                         # Конфигурационные переменные
├── 📄 .gitignore                   # Исключения для Git
├── 📄 requirements.txt             # Python зависимости
├── 📄 run.py                       # Точка входа для запуска сервера
├── 🔧 start_dev.sh                 # Скрипт запуска в dev режиме
├── 🧪 test_api.py                  # Автоматические тесты API
│
├── 📂 app/                         # Основной код приложения
│   ├── 📄 __init__.py
│   ├── 📄 main.py                  # FastAPI приложение и middleware
│   │
│   ├── 📂 api/                     # API endpoints
│   │   ├── 📄 __init__.py
│   │   └── 📂 v1/
│   │       ├── 📄 __init__.py
│   │       └── 📄 endpoints.py     # Все MCP эндпоинты
│   │
│   ├── 📂 core/                    # Основная конфигурация
│   │   ├── 📄 __init__.py
│   │   ├── 📄 config.py            # Настройки приложения
│   │   └── 📄 exceptions.py        # Кастомные исключения
│   │
│   ├── 📂 models/                  # Pydantic модели
│   │   ├── 📄 __init__.py
│   │   ├── 📄 requests.py          # Модели входящих запросов
│   │   └── 📄 responses.py         # Модели ответов
│   │
│   ├── 📂 services/                # Внешние сервисы
│   │   ├── 📄 __init__.py
│   │   └── 📄 http_client.py       # HTTP клиент для внешних API
│   │
│   └── 📂 utils/                   # Утилиты
│       ├── 📄 __init__.py
│       └── 📄 cache.py             # Система кэширования
│
├── 📂 docs/                        # 📚 Документация
│   ├── 📄 README.md                # Обзор документации
│   ├── 📄 QUICKSTART.md            # Быстрый старт
│   ├── 📄 FULL_DOCUMENTATION.md    # Полная техническая документация
│   ├── 📄 TESTING.md               # Руководство по тестированию
│   ├── 📄 RECOMMENDATIONS.md       # Рекомендации по улучшению
│   └── 📄 PROJECT_STRUCTURE.md     # Этот файл
│
├── 📂 deploy/                      # Конфигурации для деплоя
│   ├── 📄 nginx.conf               # Конфигурация Nginx
│   └── 📄 systemd.service          # Systemd сервис
│
├── 📂 tests/                       # Директория для unit тестов
└── 📂 venv/                        # Виртуальное окружение Python
```

## 🔍 Описание ключевых компонентов

### 📱 Приложение (app/)

#### `main.py`
- Основное FastAPI приложение
- Middleware для CORS
- Глобальные обработчики ошибок
- Lifecycle events

#### `api/v1/endpoints.py`
- Все 5 MCP эндпоинтов
- Версионирование API (v1)
- Интеграция с кэшированием
- Обработка внешних API вызовов

#### `core/config.py`
- Конфигурация через environment variables
- Настройки для внешних API
- Параметры кэширования и таймаутов

#### `models/`
- **requests.py**: Валидация входящих данных
- **responses.py**: Структура ответов API

#### `services/http_client.py`
- Асинхронный HTTP клиент (httpx)
- Обработка таймаутов и ошибок
- Автоматическая авторизация для aqniet.site

#### `utils/cache.py`
- TTL кэширование с cachetools
- Автоматическая генерация ключей
- Логирование cache hit/miss

### 📚 Документация (docs/)

| Файл | Назначение | Аудитория |
|------|------------|-----------|
| `README.md` | Навигация по документации | Все |
| `QUICKSTART.md` | Быстрый старт | Разработчики |
| `FULL_DOCUMENTATION.md` | Полная техническая документация | Разработчики/DevOps |
| `TESTING.md` | Руководство по тестированию | QA/Разработчики |
| `RECOMMENDATIONS.md` | Рекомендации по улучшению | Руководитель проекта |
| `PROJECT_STRUCTURE.md` | Архитектура проекта | Все |

### 🚀 Деплой (deploy/)

#### `nginx.conf`
- Reverse proxy конфигурация
- Настройки таймаутов
- SSL готовность

#### `systemd.service`
- Автозапуск сервиса
- Управление ресурсами
- Логирование

### 🧪 Тестирование

#### `test_api.py`
- Автоматическое тестирование всех эндпоинтов
- Проверка валидации ошибок
- Тестирование с реальными данными

## 🏗️ Архитектурные принципы

### 1. **Разделение ответственности**
- API endpoints отделены от бизнес-логики
- Конфигурация централизована
- Ошибки обрабатываются единообразно

### 2. **Асинхронность**
- Все HTTP вызовы асинхронные
- Эффективная обработка concurrent запросов

### 3. **Кэширование**
- Умное кэширование для оптимизации
- Разные TTL для разных типов данных
- ФОТ не кэшируется (актуальные данные)

### 4. **Валидация**
- Строгая валидация входящих данных с Pydantic
- Автоматическая генерация OpenAPI схемы

### 5. **Наблюдаемость**
- Структурированное логирование
- Health check эндпоинт
- Автоматическая документация

## 🔧 Расширение проекта

### Добавление нового эндпоинта:
1. Добавить модель запроса в `models/requests.py`
2. Добавить модель ответа в `models/responses.py`
3. Реализовать эндпоинт в `api/v1/endpoints.py`
4. Добавить тесты в `test_api.py`
5. Обновить документацию

### Добавление нового внешнего API:
1. Расширить `services/http_client.py`
2. Добавить конфигурацию в `core/config.py`
3. Обновить `.env` файл

## 📊 Метрики кодовой базы

- **Общие строки кода**: ~800 строк
- **Python файлов**: 12
- **Документации**: 6 файлов
- **Покрытие тестами**: 100% эндпоинтов
- **Внешние зависимости**: 11 пакетов